name = "rss-hello-world"
main = "src/index.js"
compatibility_date = "2024-12-24"
compatibility_flags = ["nodejs_compat"]

# Static assets configuration
assets = { directory = "public" }

# Custom domain configuration
routes = [
  { pattern = "rss.achew22.com", custom_domain = true }
]

# Enable preview URLs for testing deployments
preview_urls = true

# Note: Cloudflare Access (Zero Trust authentication) must be configured
# in the Cloudflare dashboard under Zero Trust > Access > Applications.
# Add rss.achew22.com as a self-hosted application there.

# KV namespace for storing feeds and articles
# Created using: npx wrangler kv namespace create RSS_STORE
# IMPORTANT: Replace the id below with the actual namespace id from the command output
[[kv_namespaces]]
binding = "RSS_STORE"
id = "963c1a03867a419aa31a22a85ae2d279"

# Cron trigger for automatic feed fetching
# Runs every 15 minutes to fetch new articles from all subscribed feeds
[triggers]
crons = ["*/15 * * * *"]

# [env.staging]
# name = "rss-hello-world-staging"

# [env.production]
# name = "rss-hello-world"
